{
  "version": 3,
  "sources": ["../build/constants.js", "../build/index.js"],
  "sourcesContent": ["export const NOTES = {\n  'C0': 16.35,\n  'C#0': 17.32,\n  'Db0': 17.32,\n  'D0': 18.35,\n  'D#0': 19.45,\n  'Eb0': 19.45,\n  'E0': 20.60,\n  'F0': 21.83,\n  'F#0': 23.12,\n  'Gb0': 23.12,\n  'G0': 24.50,\n  'G#0': 25.96,\n  'Ab0': 25.96,\n  'A0': 27.50,\n  'A#0': 29.14,\n  'Bb0': 29.14,\n  'B0': 30.87,\n  'C1': 32.70,\n  'C#1': 34.65,\n  'Db1': 34.65,\n  'D1': 36.71,\n  'D#1': 38.89,\n  'Eb1': 38.89,\n  'E1': 41.20,\n  'F1': 43.65,\n  'F#1': 46.25,\n  'Gb1': 46.25,\n  'G1': 49.00,\n  'G#1': 51.91,\n  'Ab1': 51.91,\n  'A1': 55.00,\n  'A#1': 58.27,\n  'Bb1': 58.27,\n  'B1': 61.74,\n  'C2': 65.41,\n  'C#2': 69.30,\n  'Db2': 69.30,\n  'D2': 73.42,\n  'D#2': 77.78,\n  'Eb2': 77.78,\n  'E2': 82.41,\n  'F2': 87.31,\n  'F#2': 92.50,\n  'Gb2': 92.50,\n  'G2': 98.00,\n  'G#2': 103.83,\n  'Ab2': 103.83,\n  'A2': 110.00,\n  'A#2': 116.54,\n  'Bb2': 116.54,\n  'B2': 123.47,\n  'C3': 130.81,\n  'C#3': 138.59,\n  'Db3': 138.59,\n  'D3': 146.83,\n  'D#3': 155.56,\n  'Eb3': 155.56,\n  'E3': 164.81,\n  'F3': 174.61,\n  'F#3': 185.00,\n  'Gb3': 185.00,\n  'G3': 196.00,\n  'G#3': 207.65,\n  'Ab3': 207.65,\n  'A3': 220.00,\n  'A#3': 233.08,\n  'Bb3': 233.08,\n  'B3': 246.94,\n  'C4': 261.63,\n  'C#4': 277.18,\n  'Db4': 277.18,\n  'D4': 293.66,\n  'D#4': 311.13,\n  'Eb4': 311.13,\n  'E4': 329.63,\n  'F4': 349.23,\n  'F#4': 369.99,\n  'Gb4': 369.99,\n  'G4': 392.00,\n  'G#4': 415.30,\n  'Ab4': 415.30,\n  'A4': 440.00,\n  'A#4': 466.16,\n  'Bb4': 466.16,\n  'B4': 493.88,\n  'C5': 523.25,\n  'C#5': 554.37,\n  'Db5': 554.37,\n  'D5': 587.33,\n  'D#5': 622.25,\n  'Eb5': 622.25,\n  'E5': 659.26,\n  'F5': 698.46,\n  'F#5': 739.99,\n  'Gb5': 739.99,\n  'G5': 783.99,\n  'G#5': 830.61,\n  'Ab5': 830.61,\n  'A5': 880.00,\n  'A#5': 932.33,\n  'Bb5': 932.33,\n  'B5': 987.77,\n  'C6': 1046.50,\n  'C#6': 1108.73,\n  'Db6': 1108.73,\n  'D6': 1174.66,\n  'D#6': 1244.51,\n  'Eb6': 1244.51,\n  'E6': 1318.51,\n  'F6': 1396.91,\n  'F#6': 1479.98,\n  'Gb6': 1479.98,\n  'G6': 1567.98,\n  'G#6': 1661.22,\n  'Ab6': 1661.22,\n  'A6': 1760.00,\n  'A#6': 1864.66,\n  'Bb6': 1864.66,\n  'B6': 1975.53,\n  'C7': 2093.00,\n  'C#7': 2217.46,\n  'Db7': 2217.46,\n  'D7': 2349.32,\n  'D#7': 2489.02,\n  'Eb7': 2489.02,\n  'E7': 2637.02,\n  'F7': 2793.83,\n  'F#7': 2959.96,\n  'Gb7': 2959.96,\n  'G7': 3135.96,\n  'G#7': 3322.44,\n  'Ab7': 3322.44,\n  'A7': 3520.00,\n  'A#7': 3729.31,\n  'Bb7': 3729.31,\n  'B7': 3951.07,\n  'C8': 4186.01\n}\n", "import { NOTES } from \"./constants.js\";\n\nconst NO_CHORD = \"single\";\nconst MAJOR = \"major\";\nconst MINOR = \"minor\";\n\nlet analyser;\nlet verbBuffer;\nlet canvas;\n\nlet chordMode = null;\n\nconst convolverMap = {};\n\nconst playPitch = ({ ctx, pitch }) => {\n  let convolver = convolverMap[pitch];\n\n  if (!convolver) {\n    convolver = ctx.createConvolver();\n    convolver.buffer = verbBuffer;\n\n    convolverMap[pitch] = convolver;\n  }\n\n  const o = [];\n  const g = [];\n\n  if (chordMode) {\n    for (let i = 0; i <= 2; i++) {\n      const locO = ctx.createOscillator();\n      const locG = ctx.createGain();\n\n      locO.type = \"triangle\";\n\n      locO.connect(locG);\n      locG.connect(ctx.destination);\n\n      if (chordMode === MAJOR) {\n        if (i === 0) {\n          locO.frequency.value = pitch;\n        } else if (i === 1) {\n          locO.frequency.value = pitch * 2**(4/12);\n        } else {\n          locO.frequency.value = pitch * 2**(7/12);\n        }\n      }\n\n      if (chordMode === MINOR) {\n        if (i === 0) {\n          locO.frequency.value = pitch;\n        } else if (i === 1) {\n          locO.frequency.value = pitch * 2**(3/12);\n        } else {\n          locO.frequency.value = pitch * 2**(7/12);\n        }\n      }\n\n      locG.gain.value = 0.00001;\n\n      locO.start(0);\n\n      locG.gain.exponentialRampToValueAtTime(0.5, ctx.currentTime);\n\n      o.push(locO);\n      g.push(locG);\n    }\n  } else {\n    const locO = ctx.createOscillator();\n    const locG = ctx.createGain();\n    const wet = ctx.createGain();\n\n    locO.type = \"triangle\";\n\n    locO.connect(locG);\n    locO.connect(convolver);\n\n    convolver.connect(wet);\n\n    wet.gain.value = 0.018;\n\n    wet.connect(analyser);\n    wet.connect(ctx.destination);\n\n    setInterval(() => {\n      if (wet.gain.value > 0.00001) {\n        wet.gain.value -= 0.00001;\n      }\n    }, 10);\n\n    locO.frequency.value = pitch;\n\n    locG.gain.value = 0.00001;\n\n    locO.start(0);\n\n    locG.gain.exponentialRampToValueAtTime(0.5, ctx.currentTime);\n\n    o.push(locO);\n    g.push(locG);\n  }\n\n  return { o, g };\n}\n\nconst stopPitch = ({ ctx, g, o }) => {\n  if (g && o) {\n    g.forEach((_, i) => {\n      g[i].gain.exponentialRampToValueAtTime(0.00000001, ctx.currentTime + 0.5);\n    });\n  }\n}\n\nconst loopingFunction = () => {\n  const data = new Uint8Array(analyser.frequencyBinCount);\n\n  requestAnimationFrame(loopingFunction);\n  analyser.getByteFrequencyData(data);\n\n  draw(data);\n}\n\nconst draw = (data) => {\n  const ctx = canvas.getContext(\"2d\");\n\n  data = [...data];\n\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  let space = (canvas.width / data.length) + 2;\n\n  data.forEach((value,i) => {\n    ctx.beginPath();\n    ctx.moveTo(space * i, canvas.height);\n    ctx.lineTo(space * i, canvas.height - value);\n    ctx.stroke();\n  });\n}\n\nwindow.onload = () => {\n  const ctx = new AudioContext();\n\n  analyser = ctx.createAnalyser();\n  analyser.fftSize = 2048;\n\n  canvas = document.getElementById(\"visuals\");\n\n  requestAnimationFrame(loopingFunction);\n\n  fetch(\"./verb.ogg\")\n    .then((data) => data.arrayBuffer())\n    .then((response) => {\n      ctx.decodeAudioData(response, (buffer) => {\n        verbBuffer = buffer;\n      });\n\n      const keys = document.getElementsByClassName(\"key\");\n\n      const noChordBtn = document.getElementById(NO_CHORD);\n      const majorBtn = document.getElementById(MAJOR);\n      const minorBtn = document.getElementById(MINOR);\n\n      noChordBtn.addEventListener(\"click\", () => { chordMode = null; });\n      majorBtn.addEventListener(\"click\", () => { chordMode = MAJOR; });\n      minorBtn.addEventListener(\"click\", () => { chordMode = MINOR; });\n\n      for (let key of keys) {\n        let note;\n\n        key.addEventListener(\"mousedown\", () => {\n          note = playPitch({\n            ctx,\n            pitch: NOTES[key.dataset.pitch],\n          });\n        });\n\n        key.addEventListener(\"touchstart\", () => {\n          note = playPitch({\n            ctx,\n            pitch: NOTES[key.dataset.pitch],\n          });\n        });\n\n        key.addEventListener(\"mouseup\", () => {\n          if (ctx && note) {\n            stopPitch({ ctx, ...note });\n          }\n        });\n\n        key.addEventListener(\"touchend\", () => {\n          if (ctx && note) {\n            stopPitch({ ctx, ...note });\n          }\n        });\n\n        key.addEventListener(\"mouseout\", () => {\n          if (ctx && note) {\n            stopPitch({ ctx, ...note });\n          }\n        });\n      };\n    })\n    .catch((err) => {\n      throw new Error(err);\n    });\n\n\n}\n"],
  "mappings": "AAAO,GAAM,GAAQ,CACnB,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,KACN,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,KACN,MAAO,MACP,IAAO,MACP,GAAM,KACN,MAAO,MACP,IAAO,MACP,GAAM,MACN,GAAM,KACN,MAAO,MACP,IAAO,MACP,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,KACN,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,GACN,MAAO,MACP,IAAO,MACP,GAAM,GACN,MAAO,MACP,IAAO,MACP,GAAM,MACN,GAAM,MACN,MAAO,KACP,IAAO,KACP,GAAM,MACN,MAAO,MACP,IAAO,MACP,GAAM,MACN,GAAM,MACN,MAAO,KACP,IAAO,KACP,GAAM,GACN,MAAO,OACP,IAAO,OACP,GAAM,IACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,IACP,IAAO,IACP,GAAM,IACN,MAAO,OACP,IAAO,OACP,GAAM,IACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,IACN,MAAO,MACP,IAAO,MACP,GAAM,IACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,MAAO,OACP,IAAO,OACP,GAAM,IACN,MAAO,OACP,IAAO,OACP,GAAM,OACN,GAAM,OACN,MAAO,QACP,IAAO,QACP,GAAM,QACN,MAAO,QACP,IAAO,QACP,GAAM,QACN,GAAM,QACN,MAAO,QACP,IAAO,QACP,GAAM,QACN,MAAO,QACP,IAAO,QACP,GAAM,KACN,MAAO,QACP,IAAO,QACP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",
  "names": []
}
